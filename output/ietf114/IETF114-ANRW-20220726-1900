# anrw

## Summary

This ANRW session, chaired by Colin Perkins, focused on "Protocol Specification Techniques." The primary goal was to initiate a discussion within the IETF/IRTF communities on *how* protocols are specified, moving beyond traditional natural language prose towards exploring formal methods, structured languages, and other techniques. Three invited talks explored automated analysis of RFCs, disambiguation tools, and best practices for cryptographic specification, highlighting challenges such as ambiguities, consistency issues, and the need for improved verification and validation methods.

## Key Discussion Points

*   **Motivation for Improved Specification:** Historically, IETF RFCs primarily use English prose, occasionally supplemented by formal languages like ABNF or YANG. This session aimed to question if this approach is sufficient, given the need for consistent, correct, and verifiable protocol specifications and implementations.
*   **Automated FSM Extraction for Attack Synthesis (Max von Hippel):**
    *   Presented a methodology to automatically extract Finite State Machines (FSMs) from natural language RFCs (TCP, DCCP) using technical language embeddings (BERT) and machine learning (neural CRF) for information extraction into an XML-based intermediary representation.
    *   A heuristic algorithm then extracts the FSM, which is used with a model checker (`korg`) to synthesize attacks (identify bugs).
    *   **Findings:** RFCs contain significant ambiguities and omissions, leading to missing or incorrect transitions in the extracted FSMs. The DCCP RFC was found to be more ambiguous and complex than TCP in this analysis.
    *   **Future Work:** Automating the highlighting of ambiguities, suggesting bug fixes, extracting logical properties, supporting secure protocols, and developing an "RFC author in the loop" software suite for continuous feedback.
    *   **Q&A Highlight:** Discussed the limitations and utility of graphical FSMs in RFCs, noting discrepancies between diagrams and text. Acknowledged FSMs are better suited for communication protocols with handshakes than for cryptographic protocols with secrecy properties.
*   **Tools for Disambiguating RFCs (Jane Yen):**
    *   Highlighted that the high volume of RFC publications (200-300 per year) involves extensive human effort, and ambiguities lead to differing interpretations and potentially buggy/vulnerable implementations (e.g., ICMP checksum).
    *   Introduced SAGE, a system that applies Natural Language Processing (NLP) techniques (semantic parsing extended with domain-specific terms and idiomatic usage) to transform sentences into "logical forms."
    *   SAGE identifies "true ambiguities" when NLP yields more or less than one logical form, and uses checking rules to eliminate "false ambiguities" arising from NLP limitations. Unambiguous logical forms can then generate executable code snippets.
    *   **Challenges:** Current SAGE limitations include parsing only packet formats/pseudocode (not state machines), difficulties with inter-sentence context, mismatches between text and diagrams, aggregating information from multiple/evolving RFCs, handling protocol stacks, and differentiating logical functionality from performance guidelines.
    *   **Future Work:** Designing a user interface tool to guide authors in inputting essential, unambiguous protocol information to generate both readable English text and executable code, with an initial focus on stateful protocols.
*   **Specifying Cryptographic Standards (Chris Wood):**
    *   Argued that while the CFRG charter defines its outputs as "informational RFCs," in practice, these documents (e.g., HMAC, HKDF, EdDSA) are critical foundational standards for IETF security protocols, demanding high quality and rigor.
    *   Defined specification quality across functional, syntax, and implementation aspects, each tailored to different audiences (protocol designers, API designers, implementers).
    *   **Examples of Issues:** RFC 8032 (EdDSA) led to interoperability and security issues due to ambiguous recommendations. The OPAQUE draft is highly complex, requiring deep understanding of many dependencies.
    *   **Case Study (Hash-to-Curve):** Presented this draft as an example of good practice, structuring the specification to clearly separate functional descriptions, API syntax, and detailed implementation pseudocode, minimizing potential for error.
    *   **Recommendations:**
        1.  **Audience-Centricity:** Tailor communication, ensure consistency in pseudocode format, and make pseudocode as close as possible to required reference implementations.
        2.  **Conceptual Consistency:** Reduce cognitive load by reusing formats and concepts, using shared vocabulary, and improving consistency across different drafts (not just within a single document).
        3.  **Embrace Formal Methods:** Leverage existing work in formally verified cryptographic algorithms (e.g., HACL*), which can generate test vectors and optimized implementations, reducing implementation errors. Discussed the format for canonical reference implementations.
    *   **Call to Action:** CFRG outputs should be treated as standards. There's a need for more tooling (like the previous talks' systems) and for seriously exploring formal methods within CFRG/IRTF.
*   **Cross-Cutting Themes:** The talks highlighted a common need for more precise and less ambiguous protocol specifications, better tools to analyze and generate them, and a clearer understanding of how to balance human readability with machine verifiability. The problem of consistency, both within a single document and across a suite of related documents, was a recurring challenge.

## Next Steps

*   **Gauge Interest for IRTF Work:** Colin Perkins invited attendees interested in pursuing research and development in protocol specification techniques within the IRTF to contact him and add their names to the session's Hedgedoc for follow-up discussions and potential future calls.
*   **Future ANRW Call for Papers:** Attendees were reminded to look out for the next ANRW call for papers.