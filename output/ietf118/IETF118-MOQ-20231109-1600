# moq

## Summary

This moq session covered interop results, announce issues, catalog format discussions, parameter reforms and interim meeting plans. The group discussed several issues and made decisions on handling conflicting announces, relay matching behavior, and the need for an announce rejection message.  The catalog format was discussed with a focus on the common encryption DRM textion and bit rate definitions. Parameter reform discussions focused on handling length mismatches and track request parameters. The group also discussed the possibility of having an interim meeting and potential locations.

## Key Discussion Points

*   **Interop Results:** Implementers presented their progress on interoperability, highlighting successful connections between different implementations and various features implemented.
*   **Conflicting Announces:** The group debated how to handle scenarios where multiple clients announce the same namespace.  Use cases included redundant publishers for high availability.
*   **Relay Matching Behavior:** The group confirmed that relay matching behavior should be based on a bitwise comparison of namespaces.
*   **Announce Rejection Message:** There was agreement on the need for a new message to inform publishers when their announce is no longer valid, allowing them to take corrective action.
*   **Catalog Format - JSON Patch:**  The group discussed adopting JSON Patch for catalog updates. There was concern about library support, and it was suggested to move ahead with it.
*   **Catalog Format - DRM:** The group decided against including DRM specific fields in the common catalog format.  Instead, they would focus on extensibility to allow streaming formats to define their own DRM elements.
*   **Catalog Format - Bitrate:** The group debated how to define bitrate in the catalog, with varying opinions on whether to include average, peak, or custom bitrate definitions.
*   **Catalog Format - Timeline Track:**  A "timeline track" for mapping group numbers and media times for scrubbable content was proposed. The participants discussed if that would be specific enough to CMAP.
*   **Parameter Reform - Length Mismatch:** Handling of length mismatches in parameters was discussed.
*   **Parameter Reform - Track Request Parameters:** Group explored removing the parameter in the track request, but there was no agreement.
*   **Interim Meeting:** Discussed the possibility of an interim meeting before Brisbane, with a preference for in-person meetings in Denver or Seattle, if possible.

## Decisions and Action Items

*   **Conflicting Announces:** Adopted the approach of not disallowing duplicate announces at the moq layer, adding an announce error code and token for tie-breaking or replacement functionality.
*   **Relay Matching Behavior:** Confirmed that relay matching behavior will use a bitwise comparison of namespaces.
*   **Announce Rejection Message:** Agreed to add a new message for announce rejection.
*   **Catalog Format - JSON Patch:** Move ahead with JSON Patch.
*   **Catalog Format - DRM:** Drop the DRM PR and make extensibility sample use case.
*   **Catalog Format - Bitrate:** Ali to return with some best-worst definition of bitrates.
*   **Catalog Repo Adoption:** merge updates, publish another version and adopt it.
*   **Parameter Reform - Length Mismatch:** Make a length mismatch be an error.
*   **Parameter Reform - Track Request Parameters:** There was no resolve on what to do with track parameters, it will be on going,

## Next Steps

*   Continue discussions on the announce issue in a PR.
*   Will to implement JSON Patch in the catalog format.
*   Will to drop the DRM PR and test the extensibility model.
*   Ali to investigate and propose the best approach for the bitrate definition.
*   Martin to schedule design call on parameter reform.
*   Alan to talk about interim location planning.
