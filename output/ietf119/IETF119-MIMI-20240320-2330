# mimi

## Summary
The Mimi working group held its second session of the week, focusing on the content format draft and architecture/protocol documents. Key discussions revolved around message IDs, attachment security, binary encoding formats (CBOR vs TLS Presentation Language), the inclusion of a subject header, and the overall architecture of the Mimi protocol. The group reached rough consensus to adopt the architecture and protocol documents.

## Key Discussion Points
*   **Content Format:**
    *   Message ID is now calculated as the hash of the ciphertext. The hub's accepted timestamp is available to providers.
    *   Discussion on preventing the web bug in attachments. Agreement that a hash of the underlying content should be included to bind the content to the message.
    *   Mentioned that the rendering sort order based on the "last seen" header is deemed sufficient, given the limitations of not specifying a client-side protocol.
    *   Mentions will adopt the identifier format decided by the protocol document.
*   **Binary Encoding:**
    *   Debate on using TLS Presentation Language (from MLS) vs. CBOR. Trade-offs discussed included parsing speed, extensibility, and existing implementations.
    *   A poll was conducted to gauge preference between TLS and CBOR, with CBOR receiving slightly more votes.
    *   Decision to use TLS Presentation Language in the content format document with an appendix showing CBOR examples.
*   **Subject Header:**
    *   Discussion on whether to include a subject header in the content format. Concerns were raised about the complexity and potential for inconsistencies with existing implementations.
    *   General sentiment leaned towards excluding the subject header from the base content format.
*   **Architecture & Protocol:**
    *   Discussion around the "active" vs. "inactive" participant distinction and its purpose. An inactive participant has permission to join the MLS group without a device.
    *   Servers (especially the hub) have visibility into the full MLS group state, including client identities (or pseudonyms).
    *   MLS operations need to be sequenced properly with changes to the room state.
    *   Overview of the HTTP-based transport, MLS-based E2EE security layer, and application layer.
    *   Discussion on how MLS AppSync proposal work.
    *   The importance of proper identifiers in the transport layrer.
    *    Tim's expressed his opinion to prescribe a specific mechanism for authentication. 
*    **HTTP Endpoints:**
    *    Details regarding the directory endpoint.
    *    Arguments in favor to not force directory and just have protocol spell resource paths.

## Decisions and Action Items
*   **Content Format Draft:**
    *   Include a hash of the underlying content to prevent the web bug.
    *   Use TLS Presentation Language in the content format document with an appendix showing CBOR examples.
    *   Exclude the subject header from the base content format.
*   **Adoption Call:**
    *   The working group tentatively agreed to adopt the architecture and protocol documents. A formal adoption call will be put out to the mailing list.
*   **Working Group Repository:**
    *   To file issues and PRs after the documents are formally adopted.

## Next Steps
*   Formal adoption call on the mailing list for the architecture and protocol documents.
*   Set up a working group repository on github for the adopted documents.
*   Schedule an interim meeting to continue the discovery discussion (led by chairs) and explore other topics, including the implementation and behavior of the queues.
*   Investigate and clarify the requirements and mechanisms for adding the key schedule.
*   File specific issues on the respective github and have the discussed over async.
