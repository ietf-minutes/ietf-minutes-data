# SML Session Meeting Minutes

## Summary

The SML (Structured Mail) working group met on Wednesday morning in Madrid to discuss the core draft, trust and security considerations, and implementation progress. Key topics included IANA registrations, MIME structure handling, full representation semantics, and a new experimental fork of Thunderbird Mobile demonstrating SML functionality. The group also reviewed a trust and security draft and conducted an adoption poll.

## Key Discussion Points

### Implementation Progress
- **Thunderbird Mobile Fork**: Demonstrated working implementation with smart link previews and structured data handling for music sharing, recipe extraction, and authentication codes
- Fork available on Google Play Store with APK distribution planned
- Examples showed enhanced rendering of Apple Music links, New York Times cooking newsletters, and Apple authentication codes

### Core Draft Technical Issues

#### IANA Registrations and Registries
- Two proposed registries:
  - Schema lookup registry for email-relevant vocabularies (schema.org, email-specific schemas)
  - Documentation registry for email-specific vocabulary concepts
- Need for clearer draft language and IANA desk consultation
- Registries intended for developer reference, not real-time client downloads

#### MIME Structure and Body Part Headers
- Proposed `content-purpose: machine-readable` header to prevent structured data from appearing in legacy clients
- Discussion of signed/encrypted JSON-LD handling (JOSE-based signatures)
- Debate over wrapper media types vs. direct MIME type handling
- Concerns raised about signing subparts vs. whole messages

#### Full Representation Semantics
- Clarification needed for distinguishing full message vs. partial representation
- Complex MIME structures with multiple multipart/alternative sections create ambiguity
- Legal footer handling for business compliance (Germany, Ireland, France requirements)
- Proposal to use schema.org publisher field for structured legal information

#### Email Lifecycle Handling
- Reply and forward mechanisms for structured emails
- Error handling for structured responses (invalid identifiers, authorization issues, server errors)
- Message updates using supersedes header
- Consideration of splitting reply functionality into separate draft

#### Message Flags and Headers
- `has-structured-data` flag similar to existing `has-attachment` flag
- Debate over utility for web clients vs. mobile/resource-constrained clients
- Discussion of additional flag for full representation indication
- Questions about flag accuracy and advisory nature

### Trust and Security Draft
- Descriptive approach focusing on running code behavior rather than prescriptive requirements
- Security concerns catalog for implementers
- Trust models including:
  - User contact lists as privileged senders
  - Contractual relationships between MUA authors and senders
  - Payment processor transaction ID matching for enhanced trust
- Concerns raised about payment processor barriers to entry and transaction ID entropy requirements

## Decisions and Action Items

### Immediate Actions
- **IANA Registration**: Complete formal IANA registry documentation with assistance from IANA desk
- **Core Draft**: Address MIME structure ambiguities and full representation semantics
- **Trust and Security**: Conduct working group adoption call based on poll results (6 in favor, 2 against)

### Technical Decisions
- Maintain descriptive approach in trust and security draft
- Consider splitting reply functionality into separate document
- Retain advisory nature of structured data flags
- Focus on semantic rather than visual representation for full representation concept

### Follow-up Items
- Develop real-world examples for payment processor trust model
- Clarify error message routing (envelope sender vs. reply-to)
- Add sender perspective to message update scenarios
- Review interaction with anti-spam mechanisms

## Next Steps

1. **Core Draft Finalization**: Address remaining MIME structure and representation issues to prepare for working group last call
2. **Trust and Security Adoption**: Proceed with adoption call and incorporate feedback
3. **Implementation Feedback**: Gather input from Thunderbird Mobile fork users and other implementers
4. **Registry Development**: Work with IANA to establish formal registry procedures
5. **Vacation Notices**: Review deferred structured vacation notice draft (not discussed due to time constraints)

The meeting concluded with strong implementation progress demonstrated and clear technical issues identified for resolution before advancing the specifications.