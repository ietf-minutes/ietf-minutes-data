# CDNI Session - IETF 124 in Montreal

## Summary

The CDNI working group session at IETF 124 began with the successful rechartering of the group, simplifying its scope and explicitly including new areas like the Metadata Expression Language (MEL) and Processing Stages. A significant portion of the session was dedicated to reviewing and adjusting document milestones, with several new working group drafts (MEL, Processing Stages, Source Access Control, Delivery Metadata) being adopted and their timelines discussed. Early IANA feedback was presented for the Control Interface and Triggers, and Named Footprints drafts. Key working group drafts, including Delivery Metadata, Control Interface and Triggers, Named Footprints, Logging Extensions, Protected Secrets, Metadata Expression Language, Processing Stages, and Source Access Control, were presented and discussed, highlighting recent changes and open issues. The group also agreed to schedule interim meetings starting mid-January to accelerate document progression.

## Key Discussion Points

*   **New Charter Adoption**: The working group successfully rechartered after two years. The new charter is simpler, accurately reflects the group's current work, removes references to completed work, and explicitly includes work on MEL and Processing Stages.
*   **Milestones Review and Adjustment**:
    *   The chairs presented a proposed milestone schedule, and authors provided feedback.
    *   **Edge Control Metadata**: Document has completed Working Group Last Call and is ready for shepherd write-up. Guillaume Bishot volunteered to shepherd. Target: December.
    *   **Control Interface and Triggers**: Version 18 submitted. Requires further review (Kevin Ma, Near Dalal) and a likely Version 19 update to address IANA comments and nits. While Kevin suggested aiming for December if only minor nits, Alan suggested March/February might be more realistic if major changes are required. **Decision**: Will attempt to meet December, but acknowledge it might slip to Feb/March if more substantial revisions are needed for Version 19.
    *   **Cache Control Metadata**: Dependent on MEL. Milestone to be adjusted after MEL is ready.
    *   **Named Footprints**: Deemed a "massive undertaking" requiring a new base extension object. Milestone pushed to 2027 (from late 2024/early 2025).
    *   **Metadata Expression Language (MEL) & Processing Stages**: These foundational documents were adopted as WG drafts and will be accelerated. Targeted for June.
    *   **Source Access Control**: Considered a "monster" draft. Milestone pushed to August.
    *   **Client Access Control**: Also pushed to August to allow foundational work to complete first.
    *   **Delivery Metadata**: Expected to be less complex. Targeted for March.
    *   **Overall Pace**: Area Director Gorry warned against scheduling too many documents for the same month (e.g., March) to avoid queueing delays and author/reviewer burnout. The group committed to moderating the submission pace.
*   **IANA Early Feedback**:
    *   **RFC 8007 BIS (Triggers)**: IANA recommended including advice for future experts in sections 7.7, 7.5, and 7.6, and a registration process/procedure in section 7.8, referencing RFC 8126.
    *   **Named Footprints**: IANA suggested ensuring a description field is present and changing "sub-registry" to "registry."
*   **Document Presentations**:
    *   **Delivery Metadata (draft-bichaud-cdni-delivery-metadata-00)**: Guillaume Bishaud presented a simplified version (v00) focusing on CDN selection (exposing multiple transport arrangements, e.g., unicast/multicast, traffic type, capacity), request routing (UCDN forcing DCDN routing mode), and traffic characterization (service name, manifest URL, max bitrate, VOD/Live/Object Download types).
        *   **Discussion**: Concerns were raised about the "CDN selection" concept potentially implying CDN virtualization and needing clearer definition within the CDNI framework (Alan). The formalization of "traffic types" (VOD, Live) was questioned, with a suggestion for either strong formal definitions or clear out-of-band agreement (Alan). Ambiguity in multicast/unicast differentiation for multiple protocols was also noted (Rajiv).
    *   **Control Interface and Triggers (draft-ietf-cdni-control-interface-triggers-18)**: Alan presented updates, primarily in response to Kevin Ma's detailed review. Key changes include:
        *   Clarification on mandatory/optional features and modularity for extensions (trigger extensions, object lists may not require RFCs).
        *   Refactoring of trigger collections, introducing a `TriggerIndex` object with collections for all triggers, mandatory collections per state, and dynamic collections by label. Optional inclusion of full trigger representation in collections for API optimization.
        *   Removal of "immediate execution" from `ExecutionPolicy`, instead relying on modification of pending triggers for expedited processing.
        *   Addition of a formal decision tree for processing triggers (priority, deadlocks, time policy, dependencies, modifications).
        *   Minor additions like node involvement count in status, examples for policy locations, and IANA registry fixes for FCA objects.
        *   **Discussion**: Rajiv expressed concern about the potential for very large payloads if full trigger content is included in collections, even if opt-in, in large operational systems. Alan reiterated it's an advertised, optional optimization for UCDN.
    *   **Named Footprints**: Alan provided context from RFCs 8006, 8008, and 9241, distinguishing between inline (local, ephemeral) and canonical footprints. The current effort aims to establish canonical footprint references as a generic base object (alongside MI Generic Metadata, Capability) to support hierarchy, caching dynamic definitions, and namespaces, allowing all CDNI objects to use stable, authoritative references.
    *   **Logging Extensions**: Ben presented changes focusing on:
        *   **Custom Fields**: DCDN can advertise new fields with identifiers and external documentation references, allowing UCDN to include them in logging records via `FCI Logging Source` and `MI Logging Metadata`.
        *   **Custom Record Type**: An empty record type allowing complete custom record definitions via `include fields`.
        *   **Sampling**: New samplers defined: percentage-based, Mel expression-based, session-based (selecting all records for a session identified by header/query param), and debug sampler (always includes records with specified header/query param).
        *   Ongoing cleanup of logging field naming inconsistencies and addition of more examples.
    *   **Protected Secrets**: Chris presented changes to remove the explicit reference to HashiCorp Vault, moving to a generic "external store reference" with a new IANA registry for store types. Emphasized the need for a security review, especially for embedded secret stores using encrypted values.
    *   **Metadata Expression Language (MEL) & Processing Stages (draft-ietf-cdni-metadata-expression-language-updated / draft-ietf-cdni-processing-stages-updated)**: Glenn Goldstein provided an overview. Processing Stages defines four points in a DCDN's request handling where rules can be applied (Client Request, Client Request Redirect, Upstream Response, Client Response), enabling header manipulation, cache rule alteration, and synthetic content generation. The data model uses "if-else" JSON structures based on conditions (URL, request headers) evaluated by MEL expressions. MEL allows for dynamic values in request/response/header transformations.
    *   **Source Metadata Extended Model (draft-ietf-cdni-source-access-control)**: Glenn Goldstein explained extensions to RFC 8006, enhancing source metadata with support for multiple origins (failover, load balancing, detention rules with pull mechanisms) and defining new protocols (HTTP/2, HTTP/3) for the IANA registry. The document heavily utilizes MEL for dynamic behavior in configurations (e.g., endpoint is expression).
*   **Interim Meetings**: The working group discussed the need for regular interim meetings between IETF sessions to maintain momentum on the numerous in-progress drafts.
    *   **Decision**: Agreed to schedule interim meetings. The first meeting is tentatively set for mid-January, allowing time for holiday recovery.
    *   **Process**: Doodle polls will be sent to the mailing list in approximately two weeks to determine exact dates, and the chosen dates will be formally declared well in advance for IETF calendar. Interims should avoid proximity to in-person IETF meetings.

## Decisions and Action Items

*   **New Charter**: Adopted by the working group.
*   **Document Milestones**: The chairs will update the Datatracker milestones to reflect the discussed adjustments. The working group will review the updated milestones.
*   **Edge Control Metadata**: Ready for shepherd write-up. Guillaume Bishot has volunteered to be the shepherd.
*   **Control Interface and Triggers**:
    *   **Action**: Alan and co-authors to publish Version 19 incorporating IANA feedback and WG comments.
    *   **Action**: Kevin Ma (and Near Dalal) to provide detailed review comments on Version 18 (and subsequent 19).
    *   **Decision**: Will aim for December submission, but recognize it may slip to February/March 2025 depending on the extent of necessary revisions for Version 19.
*   **Named Footprints**: Milestone adjusted to 2027. Alan to work on the next draft (Version 3) focusing on establishing canonical footprint references as a generic base object.
*   **Metadata Expression Language (MEL) & Processing Stages**: Milestones adjusted to June.
*   **Source Access Control**: Milestone adjusted to August.
*   **Client Access Control**: Milestone adjusted to August.
*   **Delivery Metadata**: Milestone adjusted to March.
*   **Delivery Metadata Discussion**:
    *   **Action**: Guillaume Bishaud, Alan, and Rajiv to continue the technical discussion on CDN selection, traffic type formalization, and multicast differentiation on the mailing list.
*   **Control Interface and Triggers Discussion**:
    *   **Action**: Rajiv to provide detailed review comments on draft-ietf-cdni-control-interface-triggers-18 on the mailing list, especially regarding concerns about trigger collection payload size.
*   **Interim Meetings**:
    *   **Decision**: The working group will hold interim meetings.
    *   **Action**: Chairs to send out Doodle polls to the CDNI mailing list in approximately two weeks to select dates for the first interim meeting in mid-January 2025.
    *   **Action**: Chairs to formally declare the chosen interim dates with the IETF Secretariat.

## Next Steps

*   Chairs to update document milestones in Datatracker and notify the working group.
*   Chairs to initiate Doodle polls for interim meeting scheduling on the CDNI mailing list.
*   Authors of Triggers, Named Footprints, Logging Extensions, and Protected Secrets to continue development based on feedback and IANA comments.
*   Working group members are encouraged to review the current drafts, particularly the newly adopted ones and the updated sections of the Triggers draft, and provide feedback on the mailing list.