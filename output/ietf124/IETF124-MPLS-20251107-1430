# MPLS IETF 124 Session

## Summary

The MPLS working group held its session at IETF 124, covering eight agenda items within 85 minutes. The session included status updates from the chairs, discussions on several in-progress drafts, and requests for adoption. Key topics included the MNA NRP Selector, STAMP encapsulation for MPLS, MPLS Network Action for Deterministic Networking (DetNet), LDP extensions for Flex-Algo, and OAM mechanisms for Network Resource Partitions. A brief discussion also occurred regarding a proposed survey on label stack inspection behavior. Several drafts are nearing working group last call or adoption.

## Key Discussion Points

*   **Chairs' Status Update:**
    *   No errata since IETF 123.
    *   Liaison to multiple working groups (MPLS, etc.) is being coordinated by chairs for any necessary response.
    *   One new RFC was published since the last meeting.
    *   One document was submitted to IESG, serving as a base for the MNA solution.
    *   One new working group document was adopted in August (not on this agenda).
    *   Two updated working group documents are in progress: MLTP Yang (expected one last revision before WG Last Call) and MNAPS Header (work in progress).
    *   Authors of expired drafts were encouraged to revive them if interest remains.

*   **MNA NRP Selector (draft-ietf-mpls-mna-nrp-selector):**
    *   The document proposes carrying 13-bit, 20-bit, and 8-bit NRPs (with 12 bits entropy) within ISD.
    *   Figures in the draft will be updated next week to sync with the current ISD draft.
    *   **Discussion:** A concern was raised about the multiple encoding options leading to potential interoperability issues, especially with 32-bit PSD, and a call was made to converge on fewer options. The author noted that no comments were received post-adoption and suggested that current operator needs (typically ~50 NRPs) are well-covered by 8-bit options. If trimming is desired by the WG, longer options could be removed.
    *   It was suggested that the discussion on different NRP identifier sizes should happen in the Transport Area (T.S.) rather than specific data plane working groups like MPLS or 6man.
    *   A poll of the room was taken, and a sense of those present indicates a preference for fewer options and concrete use cases for all proposed options.

*   **STAMP Encapsulation for MPLS (draft-ietf-mpls-stamp-encapsulation):**
    *   This draft defines STAMP encapsulation for MPLS-TP LSP, pseudowires, and SR-MPLS, ensuring STAMP traffic follows the same path as data traffic.
    *   **Discussion:** Considerations included using routable/non-routable destination IP addresses in the STAMP packet and how STAMP packets behave in broken LSPs or prevent leaking outside the MPLS domain. Proposed text addressing these points has been shared.
    *   **Next Steps:** Review of the shared text on encapsulation is encouraged. The LSP Ping mechanism for STAMP bootstrapping (optional) may be progressed as a separate document. The document is believed to be ready for working group last call once these points are settled.

*   **LSP Ping for STAMP (draft-mirsky-mpls-stamp-lsp-ping):**
    *   This adopted draft proposes using LSP Ping as an optional control plane mechanism to bootstrap STAMP sessions, including session ID and destination UDP port.
    *   **Discussion:** Emphasized the importance of using non-routable IPv4 loopback or proposed dummy IPv6 ranges for MPLS OAM packets to prevent them from escaping the MPLS network if an intermediate LSR incorrectly terminates an LSP, adhering to RFC 8029 requirements. This explicitly applies to MPLS OAM packets, not data traffic originating outside the MPLS domain.
    *   The use of a control channel for STAMP bootstrapping was briefly discussed as an alternative to LSP Ping.

*   **MPLS Network Action for Deterministic Networking (draft-song-mpls-mna-detnet):**
    *   This is a merged draft incorporating solutions for deterministic latency and a generic flexible MNA solution for DetNet, including parameters like flow ID, sequence number, and latency information.
    *   The merged draft uses the more generic solution as a baseline, enhanced with deterministic latency aspects and adds both PSD and ISD solutions.
    *   Opcodes are designed for latency information, flow ID, and sequence number, supporting both single and aggregated DetNet flows with variable lengths.
    *   **Discussion:** A question was raised about presenting two solutions (in-stack and post-stack) for the same use case within one document, which could confuse implementers. While previous IOM discussions led to including both, some participants expressed a preference for separate documents for clarity, while others argued that including both in one document prevents lengthy debates over which solution is superior.
    *   **Request:** Working group feedback, comments, and adoption.

*   **LDP Extension for Flex-Algo (draft-hu-mpls-ldp-extension-for-flex-algo):**
    *   The draft addresses the current inability of LDP FEC to carry Flex-Algo IDs (FA-ID), preventing LDP from operating based on FA-XP-BLEVEL.
    *   **Proposed Solution:** Add an LDP Flex-Algo capability TLV for negotiation, define new LDP FEC to carry FA-ID (for CPP support), and extend LDP FEC for SR-P-to-MP to carry FA-ID. Procedures for an "invalid FA-ID" error code are also proposed.
    *   **Discussion:** Clarification was sought on managing existing prefix SID target FEC sub-TLVs vs. new ones for Flex-Algo. The author suggested a new sub-TLV type to maintain backward compatibility with deployed implementations and offered to change its name for clarity. It was also suggested to consider extensions for adjacency SIDs related to Flex-Algo and multi-topology information. A need for clarification and procedures on handling conflicts when both multi-topology and Flex-Algo capabilities are received was identified.

*   **OAM Mechanism for NRP in MPLS Network (draft-li-mpls-oam-for-nrp):**
    *   This draft focuses on OAM for Network Resource Partitions (NRP) in MPLS networks, separating MPLS-specific parts from a broader OAM solution.
    *   **Proposal:** Utilizes basic OAM mechanisms like LSP Ping to detect NRP resource availability. It proposes carrying the NRP ID in the MPLS Echo Request, with intermediate and end nodes checking resource availability.
    *   **Protocol Extension:** A new return code in the MPLS Echo Reply is needed to signal "NRP resource unavailable." The reverse path target FEC TLV would be extended to include a "return NRP ID" for reply messages.
    *   **Discussion:** Clarification was requested on the interpretation of "NRP available" for transit nodes. A concern was raised that checking resource allocation status on transit nodes, as part of LSP Ping processing, represents a significant change to how LSP Ping is processed and is not generally expected for echo requests in ping mode. Further clarity on "resources not available" was requested.
    *   **Request:** Feedback from the working group on the necessity and appropriateness of the proposed protocol extensions.

*   **Proposed Survey on Label Stack Inspection (draft-farrell-mpls-label-stack-inspection-survey):**
    *   This individual draft proposes a survey to understand current label stack inspection behavior, particularly concerning unexpected, unrecognized, or unsupported Special Purpose Labels (BSPL/ESPL).
    *   The goal is to gather information on current practices to avoid future interoperability issues when new SPLs are introduced.
    *   **Discussion:** Concerns were raised that a non-compulsory survey might not be comprehensive or accurate, making it difficult to draw definitive conclusions. However, it was also argued that the survey could identify potential issues in existing implementations and highlight the lack of clear guidance in existing RFCs regarding expected behavior for unrecognized SPLs.
    *   **Next Steps:** The authors seek feedback on whether such a questionnaire is worthwhile, unambiguous, and sufficient before moving forward with sending it out.

## Decisions and Action Items

*   **MNA NRP Selector:** The authors will update the figures in the draft to synchronize with the current ISD draft by next week. The discussion around converging on fewer options for NRP selector encoding will continue on the mailing list, potentially involving the T.S. area for broader discussion.
*   **STAMP Encapsulation for MPLS:** The working group is encouraged to review the shared text on encapsulation. The chairs will assess if the document is ready for WG last call after review.
*   **MPLS Network Action for Deterministic Networking:** The working group will continue discussions on the mailing list regarding whether to keep both in-stack and post-stack solutions in a single document or separate them, aiming for consistent WG guidance across similar use cases.
*   **LDP Extension for Flex-Algo:** The authors will consider suggesting a new sub-TLV type for Flex-Algo and changing its name to avoid confusion with existing deployments. Further offline discussion will occur regarding extensions for adjacency SIDs and procedures for handling conflicts between multi-topology and Flex-Algo capabilities.
*   **OAM Mechanism for NRP in MPLS Network:** Further discussion on the mailing list is encouraged regarding the interpretation of "NRP available" for transit nodes and the implications of adding resource checks to LSP Ping processing.
*   **Proposed Survey on Label Stack Inspection:** The authors will follow up on the mailing list to gauge whether the working group believes this survey is worthwhile and to refine the questionnaire based on feedback.

## Next Steps

*   **Mailing List Discussions:** Continue discussions on MNA NRP Selector options, the structure of DetNet MNA documents (combined vs. separate in-stack/post-stack), the "NRP available" interpretation for OAM mechanisms, and the proposed label stack inspection survey.
*   **Draft Updates:** Authors of the MNA NRP Selector and LDP Extension for Flex-Algo will make specific updates as discussed.
*   **Working Group Last Call:** The STAMP encapsulation document is anticipated to be ready for WG last call once open points are settled.
*   **Working Group Adoption:** The MPLS Network Action for Deterministic Networking draft is seeking WG adoption. The LDP Extension for Flex-Algo draft is also seeking WG adoption.