# NETCONF Session - IETF-124

## Summary

The NETCONF session at IETF-124 covered a wide range of topics, including updates on several active working group drafts and presentations on two unchartered documents. Key discussions focused on Yang list pagination, versioning for Yang notifications, an extensible Yang model for push notifications, private candidate data stores, and NETCONF over QUIC. Significant attention was given to the proposed "Yang Push Light" draft, discussing its alignment with GMI and potential working group adoption. Two unchartered documents, one on CBOR encoding for Yang notifications and another on Yang Push Light, were presented and subsequently proposed for working group adoption. The session concluded with an open mic discussion on maintaining feature parity between NETCONF and RESTCONF, with the working group showing consensus for ensuring such parity.

## Key Discussion Points

*   **Administrivia**
    *   The chairs (Kent Watson, Mahesh Jethanandani) welcomed attendees and went through the Note Well, meeting tips, and a call for minute-takers.
    *   A significant number of working group documents (approx. 12) are currently in the post-working group document queue (Editor, IESG, AD, Chairs). The working group has not published an RFC in the last year. Mahesh Jethanandani noted recent unblocking of the HTTP client/server draft is expected to unblock several other drafts into the RFC Editor queue.
    *   Authors were reminded to provide status updates for their working group documents.

*   **Yang List Pagination (draft-ietf-netconf-list-pagination)**
    *   Presented by Hiram Chen. Latest version is -08 for the base draft, -08 for NETCONF extension, and -09 for RESTCONF extension.
    *   **Main Changes**:
        *   Defined XPath context for the `where` query parameter to address Yang Doctor review comments, specifying the context node as the query target and accessible tree as both config and non-config list/leaf-list.
        *   Clarified that `offset` and `cursor` parameters are mutually exclusive, as they represent different pagination technologies (small/stable vs. large/real-time datasets).
        *   Clarified prefix binding for XPath expressions in the `where` parameter for NETCONF.
        *   For RESTCONF, cursor feature support is stateless (server does not store state).
    *   **Outstanding Issues**:
        *   Whether to allow `Deng` (likely meant for Yang `instance-identifier` referencing) in XPath filters.
        *   Pagination error logging/debugging.
        *   Integration with RESTCONF.
    *   Authors plan to resolve these and submit another revision before requesting working group last call conclusion.

*   **Support of Versioning for Yang Notifications and Subscriptions (draft-ietf-netconf-notif-versioning)**
    *   Presented by Benoît Claise. Updates in revisions -07, -08, -09.
    *   **Main Changes**: Incorporated latest changes from the Yang Semantic Versioning document (soon to RFC), minor editorial changes, and brought Yang Library content ID into the subscription state.
    *   **Status**: Three implementations exist. Document is stable. Requested Yang Doctor's early review, which is in progress.
    *   **Feedback**: Rob Wilton (Cisco) agreed the document is ready for working group last call but requested clarification on module names in the path.
    *   **Decision**: Chairs to initiate working group last call.

*   **Extensible Yang Model for Yang Push Notifications (draft-ietf-netconf-notification-envelope)**
    *   Presented by Shashank Singh. Currently in extended working group last call since August.
    *   **Main Changes**:
        *   Addressed most Yang Doctor and Ops Directorate review comments.
        *   Removed normative text about `contents` element location.
        *   Used `timestamp` typedef from RFC 6991 and `host-name` typedef from IETF Yang types.
        *   Updated RFC 3339 reference to RFC 9557.
        *   Made `host-name` normative and added Yang features for `notification-envelope` and `host-name-sequence-number`.
    *   **Discussion Point 1: `observation-timestamp` Naming**:
        *   Proposal by Richard to use `observation/timestamp` vs. current `observation-timestamp`.
        *   Rob Wilton preferred current due to not repeating name within container. Richard suggested `observed` container.
        *   **Poll Result**: Rough consensus (15-5 in room, more online for yes) to keep `observation-timestamp` as-is.
    *   **Discussion Point 2: Toggling `enable-notification-envelope`**:
        *   Issue raised by Joe Clark (Ops Directorate) about potential disruption to active subscriptions when this option is toggled.
        *   Proposed text suggested configuration changes should not be allowed if active subscriptions exist.
        *   Rob Wilton and Richard Breschard strongly opposed, arguing config validity should not depend on operational state. Joe Clark clarified he sought operational considerations/warnings, not outright rejection.
        *   **Poll Result**: No consensus for the proposed text.
    *   **Decision/Action**: Authors to add informative text (warning) in the Yang module about the impactful nature of this change, but no prevention of configuration changes. Document to be updated and sent for IESG publication.

*   **Subscriptions to Distributed Notifications (draft-ietf-netconf-distributed-notif)**
    *   Presented by Shashank Singh. Working group last call ended in February. Shepherd review and write-up completed.
    *   **Main Changes**: Addressed Young Doctor and Ops Directorate review comments, minor changes on terminality and publisher-master agent side, leaf list naming singularized, document restructuring for readability.
    *   **Status**: No open items from authors or shepherds.
    *   **Next Steps**: Mahesh Jethanandani suggested a potential second working group last call due to the time elapsed since the first one.

*   **Augmented by Addition to Yang Library (RFC 8407bis) (draft-ietf-netconf-yang-library-augmentation)**
    *   Presented by Joe Chou. Completed working group last call.
    *   **Main Changes**:
        *   Addressed last issues regarding Yang module sets restriction for base/augmented modules by adding explanatory text early in the draft and changing "should" to "must".
        *   Updated draft title to mention it updates RFC 8407bis.
    *   **Status**: Document sent for IESG publication, currently in the ADQ.

*   **NETCONF Private Candidate Data Store (draft-ietf-netconf-private-candidate)**
    *   Presented by James Cumming. Currently in working group last call.
    *   **Purpose**: Extend NETCONF and RESTCONF to support multiple clients making concurrent configuration changes without mutual impact, committing only their own changes. Defines collision resolution.
    *   **Mechanism**: Client-based capability selects private candidate tied to session. References candidate configuration data store. Branches off running candidates.
    *   **Status**: Version -07 published before last meeting; editorial feedback included in -08 (published but after cutoff). Authors believe rough consensus achieved and seek IESG progression.
    *   **Feedback**: Rob Wilton had many unaddressed comments from -06 and requested opportunity to review -08 again.
    *   **Action**: Working group to review -08; chairs to close WG last call and prepare shepherd write-up after review.

*   **NETCONF for QUIC (draft-ietf-netconf-netconf-over-quick)**
    *   Presented by Wei Bian.
    *   **Main Changes**:
        *   Accepted majority of comments from mailing list.
        *   Modified ambiguous trunk part.
        *   Adopted "Option 2" for mapping Quick streams to NETCONF sessions (one NETCONF session per Quick connection), deemed simpler and more suitable by authors compared to multiplexing multiple sessions over one connection.
    *   **Remaining Issues**:
        *   Confirmation of the Quick stream/NETCONF session mapping solution by experts.
        *   Error codes (application and stream errors).
        *   Call Home considerations for Quick (Kent Watson noted Quick's combined transport/security layers might complicate existing Call Home mechanisms).
        *   Further editorial improvements.
    *   **Next Steps**: Address issues, aim for version -06 before IETF-125, then request working group last call.
    *   **Discussion on RESTCONF over QUIC**: Kent Watson noted no parallel RESTCONF over QUIC document exists as RESTCONF already supports HTTP/3 (which uses QUIC). Lou Berger suggested a dedicated RESTCONF over QUIC document would be useful to address multiple channels/streams and vendor implementation specifications.

*   **Yang Groupings for QUIC Clients and Servers (draft-ietf-netconf-netconf-client-server-yang-quick)**
    *   Presented by Per Anderson.
    *   **Purpose**: Define Yang groupings for the QUIC protocol, using `ietf-yang-tls-client-server` and `ietf-yang-udp-client-server` as base, and adding Yang modules for Quick versions and transport parameters.
    *   **Main Changes**: IANA Yang models refined. Registry values encoded as enums (not identities). Addressed IANA review feedback regarding potential changes in Quick registry values.
    *   **Discussion on Yang SemVer**: If a Quick registry value changes, it would be a non-backwards compatible change, requiring a major Yang module version update.
    *   **Next Steps**: Update IANA considerations regarding the special registry, then proceed to working group last call.

*   **CBOR Encoding for HTTP(S) Transport of Yang Notifications (Uncharted) (draft-neher-netconf-notification-cbor)**
    *   Presented by Neher Neher and Krishan Gupta.
    *   **Purpose**: Extend `draft-ietf-netconf-udp-notif` to include CBOR as a possible encoding for Yang notifications over HTTP(S).
    *   **Main Changes**:
        *   Incorporated CBOR encoding into the notification schema.
        *   Addressed mailing list comments, IANA redirections, and improved writing/title.
        *   Implementation changes based on discussions.
    *   **Discussion Point**: Whether to upgrade `accepting-encoding` from `application/cibor` to `application/yang-data+cibor` for more granularity (e.g., using SIDs).
    *   **WG Adoption Poll**: Per Anderson initiated a poll for working group adoption.
    *   **Decision**: Working group consensus (over 1/3 affirmative responses) to adopt the document.

*   **Yang Push Light (Uncharted) (draft-wilton-netconf-yang-push-light)**
    *   Presented by Rob Wilton.
    *   **Motivation**: Simplify existing Yang Push RFCs (8639, 8641), align with GMI implementations, and improve efficiency for distributed systems (e.g., sending separate data bits from different publishers).
    *   **Naming**: Discussion on "Yang Push Light" vs. "Yang Push V2" or a telemetry-focused name. Kent Watson opposed "Light".
    *   **Comparison to Yang Push**: Aims for significantly fewer pages (135 vs. 200+) by merging RFCs and simplifying. Uses new envelope, new HTTP/UDP Notif versions, and a new namespace for coexistence.
    *   **Main Changes in -01**:
        *   Merged and compressed text from 8639/8641, with significant rewrites.
        *   Separated config into its own Yang module (potentially a separate draft later).
        *   Unified behavior between configured and dynamic subscriptions.
        *   Added `end-of-period` notification flag for periodic subscriptions to address implicit deletes and enable mark-and-sweep.
        *   Added operational monitoring data.
        *   Receiver disconnected notes (likely to change to subscription-wide).
        *   Validated JSON examples.
        *   Moved open issues to a GitHub repo.
    *   **Outstanding Issues**:
        *   RPC error handling clean-up.
        *   Potential merge of text from 8640/8650 (dynamic over NETCONF/RESTCONF).
        *   YPath definition (JSON-like XPath subset) needs to be split into a separate draft. Discussion on its scope (minimal vs. XPath replacement).
        *   Refine message format, especially for periodic, on-change, and joint subscriptions.
        *   Consideration of an atomic flag (like GMI).
    *   **WG Adoption Poll**: Per Anderson initiated a poll for working group adoption.
    *   **Decision**: Working group consensus (majority for adoption) to adopt the document.

*   **Open Mic: NETCONF/RESTCONF Parity**
    *   Kent Watson (Chair) raised the discussion: To what extent should the working group insist that NETCONF and RESTCONF maintain features in a complementary way? He noted that many documents initially focus on NETCONF, and chairs often push for RESTCONF parity. He suggested factoring out common bits into a common document, then having specific mappings.
    *   **Arguments Against Strict Parity**: Rob Wilton suggested NETCONF and RESTCONF might operate in different spaces (device-to-controller vs. controller-to-management). He noted less demand for RESTCONF at the device level and differing implementation constraints.
    *   **Arguments For Strict Parity**:
        *   Mahesh Jethanandani: Parity helps when RESTCONF acts as a pass-through over NETCONF (minimizing controller work).
        *   Lou Berger: Maintaining feature parity is crucial for model definition independence from transport. Divergence would lead to Yang models targeting specific transports, hindering market adoption. He emphasized transport and encoding independence for Yang models.
        *   Roman Danyliw: Noted that CBOR already has some divergence (e.g., IPv6 addresses as strings vs. binary). He strongly favored alignment to avoid future problems.
        *   Kent Watson: RESTCONF has the opportunity to break out of a device-management-centric mold, like gRPC, to manage any web-based application. He noted RESTCONF's lower barrier to entry than gRPC.
        *   Benoît Claise: Acknowledged different domains, but reiterated that Yang models *must* be agnostic to encoding and transport.
    *   **Backstory**: Kent mentioned a specific working group document proposing a NETCONF improvement that might not be implementable in RESTCONF, raising concerns about publishing it before knowing RESTCONF compatibility.
    *   **Poll Result**: Working group consensus to ensure parity between NETCONF and RESTCONF.

## Decisions and Action Items

*   **Support of Versioning for Yang Notifications and Subscriptions (draft-ietf-netconf-notif-versioning)**: Chairs to initiate working group last call.
*   **Extensible Yang Model for Yang Push Notifications (draft-ietf-netconf-notification-envelope)**:
    *   Keep `observation-timestamp` naming as-is in the draft.
    *   Add informative text to the Yang module (a warning) about the disruptive nature of toggling `enable-notification-envelope`, but do not prevent the configuration change.
    *   Authors to update the document accordingly and send for IESG publication.
*   **NETCONF Private Candidate Data Store (draft-ietf-netconf-private-candidate)**: Rob Wilton (and others) to review the -08 version. Chairs to close WG last call and prepare shepherd write-up after review.
*   **CBOR Encoding for HTTP(S) Transport of Yang Notifications (draft-neher-netconf-notification-cbor)**: The working group adopted this document.
*   **Yang Push Light (draft-wilton-netconf-yang-push-light)**: The working group adopted this document.
*   **NETCONF/RESTCONF Parity**: The working group demonstrated consensus to ensure feature parity between NETCONF and RESTCONF. Mahesh Jethanandani to help update the working group charter to reflect this goal.

## Next Steps

*   **Yang List Pagination**: Authors to resolve outstanding issues and submit a new revision before requesting WG last call conclusion.
*   **Subscriptions to Distributed Notifications**: Chairs to consider a second working group last call given the time elapsed since the first.
*   **NETCONF for QUIC**: Authors to address remaining issues (mapping, error codes, Call Home), aim for version -06 before IETF-125, and then request WG last call.
*   **Yang Groupings for QUIC Clients and Servers**: Authors to update IANA considerations and then proceed to working group last call.
*   **CBOR Encoding for HTTP(S) Transport of Yang Notifications**: Authors to continue refinement under WG adoption, including the discussion on `application/yang-data+cibor`.
*   **Yang Push Light**: Authors to continue work on outstanding issues (RPC errors, YPath split, message format), with the goal of stabilizing the document for implementation by mid-next year.
*   **Working Group Charter**: Mahesh Jethanandani to assist in updating the NETCONF working group charter to reflect the commitment to NETCONF/RESTCONF feature parity.